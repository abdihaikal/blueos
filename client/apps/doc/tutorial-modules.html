<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Tutorial: BlueOS modules</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href="http://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
    <link type="text/css" rel="stylesheet" href="styles/custom.css">
    <link type="text/css" rel="stylesheet" href="styles/gfm.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Tutorial: BlueOS modules</h1>

    <section>

<header>
    

    <h2>BlueOS modules</h2>
</header>

<article class="gfm">
    <h3>How to write a module</h3><p>BlueOS uses a CMD-style module loader(which is developed by ourselves). Each module is a small unit of javascript, which can <em>require</em> and be <em>required</em> by other modules. A module is typically written like this:</p>
<pre class="prettyprint source lang-javascript"><code>ferret.module('main', function (require, exports, module) {
  module.exports = function () {
    var config = require('blueos.rest.config');
    var wallpaper = require('blueos.wallpaper');

    config.get('wallpaper', function (url) {
      wallpaper.set(url);
    });
  };
});</code></pre><p>The first parameter is the name of the module, the second parameter is the initialization function of the module. The second function is invoked with three arguments. The first parameter is a function that can be used to <em>require</em> other modules; the second one is an empty object, we can use it to export properties and methods that is visible by other modules(once required); the third parameter is the parent object of the second parameter.</p>
<p>The example above is the entry module of BlueOS. It fetches user's preferred wallpaper from the server and update ui. This feature involves two modules: <code>blueos.rest.config</code> and <code>blueos.wallpaper</code>. The first module provides REST-ful api to fetch user's configuration by key, the later provide api to update the url of wallpaper.</p>
<h3>Run module</h3><p>Each module is evaluated lazily, that is, when they are <em>required</em> by some other module. Once it is initialized, it will be cached for later usage.</p>
<p>We can also explicitly initialized module using <code>ferret.use</code>.</p>
<pre class="prettyprint source lang-javascript"><code>ferret.use([
  'main',
  'blueos.dock',
  'blueos.status',
  'blueos.ajaxstatus',
  'blueos.effect.layer'
], function (main) {
  main();
});</code></pre><p>The first parameter of is an array of module names, the second paratemer is a function which is invoked with a list of module instances.
In code above, we only care about <em>main</em> module, so we only write <em>main</em> in param list.</p>
</article>

</section>

</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Modules</h3><ul><li><a href="module-blueos_app.html">blueos/app</a></li><li><a href="module-blueos_app_GUIApplication.html">blueos/app/GUIApplication</a></li><li><a href="module-blueos_effect_layer.html">blueos/effect/layer</a></li><li><a href="module-blueos_rest_app.html">blueos/rest/app</a></li><li><a href="module-blueos_rest_config.html">blueos/rest/config</a></li><li><a href="module-blueos_rest_file.html">blueos/rest/file</a></li><li><a href="module-core_event.html">core/event</a></li></ul><h3>Namespaces</h3><ul><li><a href="ferret.html">ferret</a></li></ul><h3>Tutorials</h3><ul><li><a href="tutorial-calculator.html">App: Calculator</a></li><li><a href="tutorial-calendar.html">App: Calendar</a></li><li><a href="tutorial-datetime.html">Date and Time</a></li><li><a href="tutorial-future.html">Future of BlueOS</a></li><li><a href="tutorial-googlemap.html">App: Google Map</a></li><li><a href="tutorial-how-to-develop-app.html">How to develop applications for BlueOS</a></li><li><a href="tutorial-interact.html">Interactions between applications</a></li><li><a href="tutorial-modules.html">BlueOS modules</a></li><li><a href="tutorial-sdk.html">BlueOS SDK</a></li><li><a href="tutorial-wallpaper.html">App: Wallpaper</a></li><li><a href="tutorial-weather.html">App: Weather</a></li><li><a href="tutorial-zentype.html">App: Zen Typing</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Sun Oct 08 2017 03:37:31 GMT+0000 (UTC)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>